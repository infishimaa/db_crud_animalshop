# Animal Shop

## Опис
Animal Shop — це CRUD‑система для керування **користувачами** та **товарами (тваринами)**.  
Система дозволяє додавати, редагувати, видаляти та переглядати дані через веб‑інтерфейс.

---

## Технології
- **Мова програмування:** PHP
- **База даних:** MySQL
- **Інтерфейс:** HTML, CSS, JavaScript
- **Інфраструктура:** Docker + Docker Compose

---

## Структура проєкту
- **lab6/** — основна папка проєкту
  - **mysql/** — налаштування бази даних
    - **init/** — SQL‑схеми та початкові дані
      - `001_schema.sql` — створення таблиць `users`, `animals` та `orders`
  - **src/** — вихідний код застосунку
    - **public/** — основні файли веб‑інтерфейсу
      - `auth.php` — логіка реєстрації та аутентифікації користувачів.
      - `db.php` — підключення до MySQL
      - `generate_password.php` — допоміжний скрипт для безпечного хешування паролів.
      - `handlers.php` — обробка CRUD‑операцій
      - `index.php` — головна сторінка з інтерфейсом
      - `login.php` — сторінка авторизації користувачів у системі.
      - `logout.php` — скрипт для безпечного завершення сесії користувача.
      - `register.php` — форма реєстрації нових користувачів із валідацією даних.
      - `script.js` — клієнтська логіка (робота кнопок, модальних вікон)
      - `styles.css` — стилі оформлення
  - `.env` — змінні середовища для налаштування БД
  - `backup_animal_shop.sql` - резервна копія бази даних
  - `docker-compose.yml` — конфігурація контейнерів (PHP + MySQL)
  - `README.md` - документація проєкту
  - `replica_dump.sql` - дамп для реплікації MySQL

  ---

---

## Запуск проєкту

**Клонувати репозиторій**
   ```bash
   git clone <url>
   cd lab6

**Підняти Docker‑контейнери**
    docker-compose up -d

- Це створить:
- crud_app — PHP‑Apache застосунок
- crud_db — основна база MySQL
- crud_pma — phpMyAdmin для керування БД
- mysql_replica — репліка MySQL для демонстрації реплікації


**Відкрити сайт**
    http://localhost:8080

---    

## CRUD-функціонал 
Користувачі
- Додавання нового користувача
- Редагування даних користувача
- Видалення користувача
- Перегляд списку користувачів
Тварини
- Додавання нової тварини
- Редагування даних тварини
- Видалення тварини
- Перегляд списку тварин
## Додатково (ЛР №5)
Усі операції виконуються через веб‑інтерфейс.
Реалізовано роботу з **реплікою MySQL** (`mysql_replica`) для демонстрації синхронізації даних.  
CRUD‑операції протестовано на основній БД та перевірено коректність відображення у репліці.

### Безпека та валідація даних (ЛР №6)
У межах шостої лабораторної роботи було проведено аудит безпеки застосунку та впроваджено захисні механізми проти основних веб-вразливостей.

**В межах роботи було оновлено наступні файли:**
1. **db.php**: 
2. **handlers.php**: 
3. **index.php**: 
4. **script.js**: 

**Результати аудиту безпеки:**
1.  **Аналіз точок входу**: Проаналізовано всі форми (додавання/редагування) та URL-параметри.
2.  **Санітизація**: Усі дані, що надходять від користувача, проходять фільтрацію перед обробкою на сервері.
3.  **Сканування вразливостей**: Проєкт протестовано за допомогою автоматизованого сканера (OWASP ZAP). Виявлені потенційні ризики (відсутність специфічних HTTP-заголовків безпеки) були зафіксовані у звіті.

### Розрахунково-графічна робота (РГР)
Метою РГР стала розробка цілісної інформаційної системи на базі проєкту «Animal Shop», що об’єднує функціональність усіх лабораторних робіт у захищений та масштабований продукт.

**В межах роботи було реалізовано/оновлено наступні модулі:**
1.  **Система аутентифікації: Створено файли login.php, register.php, logout.php та generate_password.php для керування доступом.
2.  **Інфраструктура (Docker): Налаштовано docker-compose.yml з підтримкою основної БД та репліки для забезпечення відмовостійкості.
3.  **Адміністрування (PoLP): Впроваджено скрипт 002_roles.sql для розмежування прав доступу на рівні СУБД (Адмін/Заводник/Клієнт).
4.  **Презентація: Підготовлено файл Animal Shop.pptx, який містить повний аналіз предметної області, ER-діаграму та демонстрацію роботи.

**Результати виконання вимог РГР:**
1.  **Повноцінний CRUD: Графічний інтерфейс дозволяє керувати всіма сутностями БД (користувачі, тварини, замовлення) без прямого доступу до консолі.
2.  **Рольова модель доступу: Завдяки реалізованій авторизації, інтерфейс та можливості системи адаптуються під рівень прав користувача (наприклад, доступ до редагування мають лише Адміністратор та Заводник).
3.  **Відмовостійкість та моніторинг: Система використовує реплікацію MySQL та веде логування повільних запитів для забезпечення стабільної роботи під навантаженням.
4.  **Валідація та Безпека: Забезпечено захист від SQL-ін'єкцій та XSS-атак через фільтрацію вхідних даних та екранування виводу, що підтверджено аудитом сканером OWASP ZAP.

Автори: Кумановський Дмитро та Корицька Ольга - студенти 2-го курсу спеціальності "Комп'ютерна інженерія". 
Проєкт виконано у рамках дисципліни "Організація баз даних".



